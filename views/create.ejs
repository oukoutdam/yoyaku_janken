<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘ŠğŸ“„âœ‚ï¸ Yoyaku Janken</title>
</head>
<body>
    <a href="/"><h1>ğŸ‘ŠğŸ“„âœ‚ï¸ Yoyaku Janken - éƒ¨å±‹ä½œæˆ</h1></a>

    <form action="/create" method="post">
        <label for="numPeople">å‚åŠ äººæ•°:</label>
        <input type="number" name="numPeople" id="numPeople" required>
        <button id="numPeopleBtn" type="button">ã‚»ãƒƒãƒˆ</button>
        <div id="memberInputContainer"></div>

        <label for="numRounds">ãƒ©ã‚¦ãƒ³ãƒ‰æ•°</label>
        <input type="number" name="numRounds" id="numRounds" required>
        <br>

        <button type="submit">ç™»éŒ²</button>
    </form>

    <script>
        const memberInput = document.querySelector("#memberInputContainer");

        document.querySelector('#numPeopleBtn').addEventListener('click', function(event) {
            event.preventDefault();
            const numPeople = Number(document.querySelector("#numPeople").value);

            memberInput.innerHTML = '';

            for (let i = 0; i < numPeople; i++) {
                const unList = document.createElement('ul');

                const label = document.createElement('label');
                label.htmlFor = `member_${i}`;
                label.textContent = `member ${i}: `;

                const input = document.createElement('input');
                input.type = 'text';
                input.name = `member_${i}`;
                input.id = `member_${i}`;
                input.required = true;

                unList.appendChild(label);
                unList.appendChild(input);

                memberInput.appendChild(unList);
            }
        });

        document.querySelector("#numRoundsBtn").addEventListener('click', function(event) {
            event.preventDefault();
            const numRounds = Number(document.querySelector("#numRounds").value);
            const rpsChoicesContainer = document.querySelector("#rpsChoicesContainer");

            rpsChoicesContainer.innerHTML = '';

            for (let i = 0; i < numRounds; i++) {
                const unList = document.createElement('ul');

                const label = document.createElement('label');
                label.htmlFor = `rps_${i}`;
                label.textContent = `ãƒ©ã‚¦ãƒ³ãƒ‰ ${i + 1}: `;

                const input = document.createElement('select');
                input.name = `rps_${i}`;
                input.id = `rps_${i}`;
                input.required = true;

                const choices = [{name: "rock", emoji: "ğŸ‘Š"}, {name: "paper", emoji: "ğŸ“„"}, {name: "scissors", emoji: "âœ‚ï¸"}];

                for (let choice of choices) {
                    const option = document.createElement('option');
                    option.value = choice.name;
                    option.textContent = choice.emoji;

                    input.appendChild(option);
                }

                unList.appendChild(label);
                unList.appendChild(input);

                rpsChoicesContainer.appendChild(unList);
            }
        })
    
    </script>

    <script src="script.js"></script>
</body>
</html>